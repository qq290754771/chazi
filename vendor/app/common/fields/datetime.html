<!--
 * @Title: 时间模块
 * @Author: wzs
 * @Date: 2020-05-15 17:11:21
 * @LastEditors: wzs
 * @LastEditTime: 2020-07-29 21:20:23
 * @Description: 
-->
<?php
if($r['setup']['option'] == 'year'){
    $value = $form->data[$r['field']] ? toDate($form->data[$r['field']],"Y") :
    toDate(time(),"Y"); 
}
else if($r['setup']['option'] == 'month'){
    $value = $form->data[$r['field']] ? toDate($form->data[$r['field']],"Y-m") :
    toDate(time(),"Y-m"); 
}
else if($r['setup']['option'] == 'datetime'){
    $value = $form->data[$r['field']] ? toDate($form->data[$r['field']],"Y-m-d H:i:s") :
    toDate(time(),"Y-m-d H:i:s"); 
}
else if($r['setup']['option'] == 'time'){
    $value = $form->data[$r['field']] ? toDate($form->data[$r['field']],"H:i:s") :
    toDate(time(),"H:i:s"); 
}
else{
    $value = $form->data[$r['field']] ? toDate($form->data[$r['field']],"Y-m-d H:i:s") :
    toDate(time(),"Y-m-d H:i:s"); 
}
?>
<input
  type="datetime"
  title="{$r['name']}"
  name="{$r['field']}"
  data-required="{$r['required']==1 ? 'required' : ''}"
  placeholder="请选择{$r['name']}{$r['required']==1 ? '(必填)' : ''}"
  value="{$value}"
  class="{$r['class']} layui-input"
  id="{$r['field']}"
/>

<script>
  layui.use(["laydate"], function () {
    var laydate = layui.laydate;
    laydate.render({
      elem: "#{$r['field']}", //指定元素
      type: "{$r['setup']['option']}",
      {if condition="$r['setup']['option'] == 'year'"}
      format: "yyyy"
      {elseif condition="$r['setup']['option'] == 'month'"}
      format: "yyyy-MM"
      {elseif condition="$r['setup']['option'] == 'datetime'"}
      format: "yyyy-MM-dd HH:mm:ss"
      {elseif condition="$r['setup']['option'] == 'time'"}
      format: "HH:mm:ss"
      {else}
      format: "yyyy-MM-dd HH:mm:ss"
      {/if}
    });
  });
</script>
